(function(){"use strict";const s={isEnabled:!1,logLevel:"debug",log:function(...e){this.isEnabled&&["debug","info","error"].includes(this.logLevel)&&console.log(...e)},info:function(...e){this.isEnabled&&["info","debug"].includes(this.logLevel)&&console.info("INFO: ",...e)},error:function(...e){this.isEnabled&&["error","info","debug"].includes(this.logLevel)&&console.error("ERROR: ",...e)}},n=60,P=24,h=30;self.onmessage=function(e){s.log("Rolling average worker received message");const r=n*P,g=r*h,f=[];let i=0,l=0,t=0,a=0;try{s.log("Rolling average worker received message");for(let o=0;o<e.data.length;o++){i+=e.data[o].gensetRealPowerContribution/n,l+=e.data[o].providedPVPower/n,t+=e.data[o].gensetRealPowerContribution/n,a+=e.data[o].providedPVPower/n;let d,c;o<r?(d=i/1e3,c=l/1e3):(i-=e.data[o-r].gensetRealPowerContribution/n,l-=e.data[o-r].providedPVPower/n,d=i/1e3,c=l/1e3);let u,v;o<g?(u=t/1e3,v=a/1e3):(t-=e.data[o-g].gensetRealPowerContribution/n,a-=e.data[o-g].providedPVPower/n,u=t/1e3,v=a/1e3),f.push({dailyGenAverage:d,dailyPVAverage:c,monthlyGenAverage:u,monthlyPVAverage:v})}self.postMessage(f)}catch(o){s.error("Error in rolling average worker: ",o)}}})();
